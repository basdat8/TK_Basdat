{% extends 'base.html' %}

{% block title %}Dashboard Dokter Hewan - Sizopi{% endblock %}

{% block extra_css %}
<style>
    .dashboard-header {
        background: linear-gradient(135deg, #90cb81 0%, #52b788 100%);
        padding: 2rem;
        border-radius: 10px;
        color: white;
        margin-bottom: 2rem;
    }

    .dashboard-title {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 1rem;
    }
    
    .stats-card {
        background: white;
        border-radius: 10px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        height: 100%;
    }
    
    .stats-title {
        font-size: 1rem;
        font-weight: 600;
        color: #888;
        margin-bottom: 1rem;
    }
    
    .stats-value {
        font-size: 2rem;
        font-weight: 700;
        color: #2d6a4f;
        margin-bottom: 0.5rem;
    }
    
    .stats-subtitle {
        font-size: 0.9rem;
        color: #aaa;
    }
    
    .medical-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1rem;
    }
    
    .medical-table th {
        background: #edf6f0;
        color: #2d6a4f;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid #d1e7dd;
    }
    
    .medical-table td {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #eee;
    }
    
    .medical-table tr:last-child td {
        border-bottom: none;
    }
    
    .badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .badge-success {
        background: #d1e7dd;
        color: #0f5132;
    }
    
    .badge-warning {
        background: #fff3cd;
        color: #856404;
    }
    
    .badge-danger {
        background: #f8d7da;
        color: #842029;
    }
    
    .species-card {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .species-name {
        font-weight: 600;
    }
    
    .species-count {
        font-size: 1.1rem;
        font-weight: 700;
        color: #2d6a4f;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h1 class="dashboard-title">Selamat Datang, {{ user_data.nama_lengkap }}</h1>
        <p>Anda login sebagai Dokter Hewan</p>
        <div class="mt-3">
            <span class="badge bg-light text-dark">No. STR: {{ user_data.no_str }}</span>
            {% for spec in user_data.spesialisasi %}
                <span class="badge bg-white text-success">{{ spec }}</span>
            {% endfor %}
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Hewan Ditangani Bulan Ini</div>
                <div class="stats-value">{{ medical_stats.bulan_ini }}</div>
                <div class="stats-subtitle">Pasien</div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Hewan Ditangani Bulan Lalu</div>
                <div class="stats-value">{{ medical_stats.bulan_lalu }}</div>
                <div class="stats-subtitle">Pasien</div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Total Tahun Ini</div>
                <div class="stats-value">{{ medical_stats.total_tahun }}</div>
                <div class="stats-subtitle">Pasien</div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-8 mb-4">
            <div class="card h-100">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0">Jadwal Pemeriksaan Hari Ini</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="medical-table">
                            <thead>
                                <tr>
                                    <th>Waktu</th>
                                    <th>Nama Hewan</th>
                                    <th>Spesies</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>09:00</td>
                                    <td>Leo</td>
                                    <td>Singa</td>
                                    <td><span class="badge badge-success">Selesai</span></td>
                                </tr>
                                <tr>
                                    <td>10:30</td>
                                    <td>Gajah</td>
                                    <td>Gajah Sumatera</td>
                                    <td><span class="badge badge-success">Selesai</span></td>
                                </tr>
                                <tr>
                                    <td>13:00</td>
                                    <td>Simba</td>
                                    <td>Harimau Sumatra</td>
                                    <td><span class="badge badge-warning">Menunggu</span></td>
                                </tr>
                                <tr>
                                    <td>14:30</td>
                                    <td>Kiki</td>
                                    <td>Orangutan</td>
                                    <td><span class="badge badge-warning">Menunggu</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0">Hewan Berdasarkan Spesies</h5>
                </div>
                <div class="card-body">
                    {% for species, count in medical_stats.by_species.items %}
                        <div class="species-card bg-light">
                            <div class="species-name">{{ species }}</div>
                            <div class="species-count">{{ count }}</div>
                        </div>
                    {% empty %}
                        <p class="text-center text-muted py-4">Belum ada data spesies</p>
                    {% endfor %}

                    {% if not medical_stats.by_species %}
                        <div class="species-card bg-light">
                            <div class="species-name">Singa</div>
                            <div class="species-count">3</div>
                        </div>
                        <div class="species-card bg-light">
                            <div class="species-name">Gajah</div>
                            <div class="species-count">2</div>
                        </div>
                        <div class="species-card bg-light">
                            <div class="species-name">Harimau</div>
                            <div class="species-count">4</div>
                        </div>
                        <div class="species-card bg-light">
                            <div class="species-name">Orangutan</div>
                            <div class="species-count">1</div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card">                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Rekam Medis Terbaru</h5>
                    <a href="{% url 'list_hewan' %}" class="btn btn-sm btn-outline-success">Kelola Data Hewan</a>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="medical-table">
                            <thead>
                                <tr>
                                    <th>Tanggal</th>
                                    <th>Nama Hewan</th>
                                    <th>Diagnosis</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>23 Mei 2023</td>
                                    <td>Leo</td>
                                    <td>Pemeriksaan rutin</td>
                                    <td><span class="badge badge-success">Sehat</span></td>
                                </tr>
                                <tr>
                                    <td>22 Mei 2023</td>
                                    <td>Gajah</td>
                                    <td>Infeksi kulit ringan</td>
                                    <td><span class="badge badge-warning">Dalam pengobatan</span></td>
                                </tr>
                                <tr>
                                    <td>20 Mei 2023</td>
                                    <td>Kiki</td>
                                    <td>Pemeriksaan gigi</td>
                                    <td><span class="badge badge-success">Sehat</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    console.log('Dashboard Dokter Hewan loaded successfully');
</script>
{% endblock %}
