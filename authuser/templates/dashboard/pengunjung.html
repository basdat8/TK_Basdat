{% extends 'base.html' %}

{% block title %}Dashboard Pengunjung - Sizopi{% endblock %}

{% block extra_css %}
<style>
    .dashboard-header {
        background: linear-gradient(135deg, #b8e1b5 0%, #52b788 100%);
        padding: 2rem;
        border-radius: 10px;
        color: white;
        margin-bottom: 2rem;
    }

    .dashboard-title {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 1rem;
    }
    
    .stats-card {
        background: white;
        border-radius: 10px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        height: 100%;
    }
    
    .stats-title {
        font-size: 1rem;
        font-weight: 600;
        color: #888;
        margin-bottom: 1rem;
    }
    
    .stats-value {
        font-size: 2rem;
        font-weight: 700;
        color: #2d6a4f;
        margin-bottom: 0.5rem;
    }
    
    .stats-subtitle {
        font-size: 0.9rem;
        color: #aaa;
    }
    
    .visit-table, .ticket-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1rem;
    }
    
    .visit-table th, .ticket-table th {
        background: #edf6f0;
        color: #2d6a4f;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid #d1e7dd;
    }
    
    .visit-table td, .ticket-table td {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #eee;
    }
    
    .visit-table tr:last-child td, .ticket-table tr:last-child td {
        border-bottom: none;
    }
    
    .badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .badge-success {
        background: #d1e7dd;
        color: #0f5132;
    }
    
    .badge-warning {
        background: #fff3cd;
        color: #856404;
    }
    
    .badge-primary {
        background: #cfe2ff;
        color: #0a58ca;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h1 class="dashboard-title">Selamat Datang, {{ user_data.nama_lengkap }}</h1>
        <p>Anda login sebagai Pengunjung</p>
    </div>
    
    <div class="row mb-4">
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Kunjungan Bulan Ini</div>
                <div class="stats-value">5</div>
                <div class="stats-subtitle">Aktivitas</div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Tiket Aktif</div>
                <div class="stats-value">2</div>
                <div class="stats-subtitle">Tiket</div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="stats-card">
                <div class="stats-title">Adopsi Aktif</div>
                <div class="stats-value">1</div>
                <div class="stats-subtitle">Hewan</div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0">Riwayat Kunjungan</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="visit-table">
                            <thead>
                                <tr>
                                    <th>Lokasi</th>
                                    <th>Tanggal</th>
                                    <th>Alamat</th>
                                    <th>Jenis</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for kunjungan in riwayat_kunjungan|slice:":5" %}
                                <tr>
                                    <td>{{ kunjungan.lokasi }}</td>
                                    <td>{{ kunjungan.tanggal }}</td>
                                    <td>{{ kunjungan.alamat_lokasi }}</td>
                                    <td>
                                        <span class="badge {% if kunjungan.jenis == 'Adopsi Hewan' %}badge-success{% else %}badge-primary{% endif %}">
                                            {{ kunjungan.jenis }}
                                        </span>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4" class="text-center py-3">Belum ada riwayat kunjungan</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0">Tiket Anda</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="ticket-table">
                            <thead>
                                <tr>
                                    <th>Tanggal</th>
                                    <th>Lokasi</th>
                                    <th>Jenis Tiket</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for tiket in tiket_data|slice:":5" %}
                                <tr>
                                    <td>{{ tiket.tanggal }}</td>
                                    <td>{{ tiket.lokasi }}</td>
                                    <td>{{ tiket.jenis_tiket }}</td>
                                    <td>
                                        <span class="badge {% if tiket.status == 'Lunas' %}badge-success{% else %}badge-warning{% endif %}">
                                            {{ tiket.status }}
                                        </span>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4" class="text-center py-3">Belum ada tiket yang dibeli</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    console.log('Dashboard Pengunjung loaded successfully');
</script>
{% endblock %}
